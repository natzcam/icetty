#!/usr/bin/env node
const argv = require("yargs").argv;
const client = require("../lib/client");

if (!process.stdout.isTTY) {
  console.error("Not using a terminal window");
  process.exit(-1);
}

(async () => {
  try {
    await client.setup(argv);

    if (argv.key) {
      return client.key()
    } else {
      await client.start();
      process.exit(0)
    }
  } catch (e) {
    console.error(e)
    process.exit(-1)
  }

})();
